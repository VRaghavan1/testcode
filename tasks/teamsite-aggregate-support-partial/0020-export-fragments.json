
{
  "tasks": [
    {
      "taskCode": "Shell-RM",
      "taskConfigurationTemplate": {
        "in": {},
        "params": {
          "filename": "{DATA_PROCESSING_FOUNDATION}/{TEMPDIRECTORY}/{TASK_FILENAME}.xml"
        }
      }
    },
    {
      "taskCode": "DataRepositoryToDataRecordBulk",
      "taskConfigurationTemplate": {
        "params": {
          "datareposervice_host": "{DATA_REPOSITORY_SERVICE_HOST}",
          "datareposervice_port": "{DATA_REPOSITORY_SERVICE_PORT}",
          "customer_code": "{CUSTOMER_CODE}",
          "datarepo_code": "{DATA_REPOSITORY_CODE}",
          "datarepo_collection_code": "fragments-record"
        }
      }
    },

    {
      "taskCode": "RunScriptComponent",
      "taskConfigurationTemplate": {
        "params": {
          "script":
          "dataRecord['elapsed_time'] = (_.now() - parseInt(dataRecord['ute~supplemental~fragment~date_modified_hidden'], 10))/60000;"
          
        }
      }
    },

    {
      "taskCode": "FilterDataRecord",
      "taskConfigurationTemplate": {
        "params": {
          "condition": {
            "elapsed_time": {"$lt": {PARTIAL_FREQUENCY}}
          }
        }
      }
    },
    {
      "taskCode": "ReplacePropertyNames",
      "taskConfigurationTemplate": {
        "params": {
          "pattern": "~",
          "replacement": ".",
          "property": "*"
        }
      }
    },
    {
      "taskCode": "PickProperties",
      "taskConfigurationTemplate": {
        "params": {
          "properties": ["ute.*"]
        }
      }
    },
    {
      "taskCode": "DataRecordToEndecaXmlFile",
      "taskConfigurationTemplate": {
        "params": {
          "filename": "{DATA_PROCESSING_FOUNDATION}/{TEMPDIRECTORY}/{TASK_FILENAME}.xml"
        }
      }
    }  ]
}